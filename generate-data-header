#!/bin/sh
# Embeds the files given as arguments in a C header.
# Copyright (C) 2018 Juhani Numminen
set -e
echo "/* This is an autogenerated file. */"
echo "#ifndef DATA_H"
echo "#define DATA_H"
for f in $@; do
    token=$(basename $f | tr . _)
    escaped=$(<$f sed 's/"/\\"/g' | tr -d '\n') # escape " and remove newlines
    printf '#define %s "%s"\n' "$token" "$escaped"
done
echo "#endif"
